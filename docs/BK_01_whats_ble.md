



おもちゃ。ラジコン的な。

ベンチャー企業。
置き忘れ防止タグ。姿勢検出。ウエアラブル機器。メガネ系デバイス。
単体ではキツイけど、スマートフォンと連携することで初めて意味がある。


[Flipboard: iOSとかの、おもしろハード](http://flip.it/HSH3C) [^2020]


[^2020]: [Flipboard: iOSとかの、おもしろハード](http://flip.it/HSH3C)


### iOSとBluetooth Low Energy

iOSと連携するもの。
iBeacon
Apple Notification Center Service
HealthKit
HomeKit





























## 身近な Bluetooth Low Energy 

Bluetooth Low Energy という超低消費電力無線通信技術を使えば、低コストで使い捨ての電池(1次電池)で長期間動作するハードウェアが実現できること、そして、iOSが多種多様な周辺デバイスとアプリケーションをつなぐ開発環境を提供していることで、多種多様な周辺デバイスが生み出されてきています。ですが、まだ身近な存在というほどではありません。

最初に Bluetooth Low Energy を利用した周辺デバイスが登場したのは、フィットネスやサイクリングといった分野です。これらの分野では、Bluetooth Low Energy 登場以前から、運動強度を計測するための心拍センサやパワーメータといった無線接続の計測デバイスが普及していました。iOSデバイスと接続できる新たな付加価値として、これらの商品群から Bluetooth Low Energy に対応してきました。

これらの分野を除くと、Bluetooth Low Energy を使った周辺デバイスは、まだそれほど身近にはありません。新しい周辺デバイスは新しい利用場面をもたらしますが、その新しさゆえに普及には時間がかかります。電車で利用している人を見かけるほど一般に普及するには、話題になり急速に普及したとしても2~3年はかかるでしょう。

まずは、通信販売で手軽に購入ができる Bluetooth Low Energy 対応の周辺デバイスとして、フィットネスに使われる心拍計を取り上げ、そのユーザ体験と、その体験を支えている無線通信通信とアプリケーションの概要を見ていきます。

### Bluetooth Low Energy の心拍計体験

Bluetooth Low Energy が体験できる最も身近な分野は、フィットネスです。この分野では、Bluetooth Low Energy が登場する以前から、適切なトレーニング効果を得るために、ランニングや屋内トレーニングでの運動強度や心拍数の計測がおこなわれています。

体を動かしていても安定して脈拍が取れる心拍計には、胸ベルト型と腕時計型の2種類があります。

胸ベルト型は、胸に巻き付けたベルトに電極と本体がとりつけてあるもので、心臓の筋肉が動くときに生じる微小な電気信号から心拍を検出します。各社から製品が出ていますが、例えば、米国 [Wahoo Fitness L.L.C.](http://www.wahoofitness.com/)[^1010] の Blue HR および TICKR RUN などの製品があります。

[^1010]: [Wahoo Fitness L.L.C.](http://www.wahoofitness.com/) 

腕時計型は、時計の文字盤部分の裏面に発光素子と光検出センサーが取り付けてあるもので、皮膚の散乱光の強さから脈拍による血流量変化、つまり心拍を検出します。これも数社から製品が出ていますが、例えば、米国 Physical Enterprises Inc. の [Mio ALPHA Heart Rate Watches](http://www.mioglobal.com/) [^1020] があります。

[^1020]: [Mio ALPHA Heart Rate Watches](http://www.mioglobal.com/) 

これらのデバイスは各社のサイトあるいはアマゾンなどから通信販売で購入できます。入手した心拍計をiOSデバイスと接続して使う手順は、次の3つです。

1. アプリケーションのインストール
2. iOSデバイスと心拍計との接続
3. 心拍数の計測

まずiOSデバイスにアプリケーションをインストールします。AppStoreで検索すると Bluetooth Low Energy の心拍計に対応したiOSアプリケーションが数多く見つかります。心拍計を販売する会社が自社製品を使うために提供しているものや、トレーニング専用アプリケーションが心拍計測にも対応しているものなど、アプリケーションの開発元も提供目的も様々です。

ここでは Bluetooth Low Energy の半導体を開発販売しているノルウェーの [Nordic Semiconductor ASA](http://www.nordicsemi.com) [^1030] が出している [nRF Toolbox](https://itunes.apple.com/jp/app/nrf-toolbox/id820906058) [^1040] を使います。

[^1030]: [Nordic Semiconductor ASA](http://www.nordicsemi.com)
[^1040]: [nRF Toolbox](https://itunes.apple.com/jp/app/nrf-toolbox/id820906058)

<!-- 図を入れること、a)アプリケーション画面、b)BT設定ダイアログがでているところ、 c)心拍の画面 -->

実際に心拍計に接続してアプリケーションから利用してみます。

まず、アプリケーションをインストールします。次に、iOSデバイスと心拍計を接続して、心拍値を見てみます。アプリケーションを立ち上げると、デバイスの種類を選択するアイコン一覧画面が表示されます<!-- a)アプリ画面 -->。この画面中央にある下にHRMと書かれたハートマークのアイコンをタッチして選択します。このHRMは、heart rate monitor 心拍計の略称です。


ここで心拍計を装着します。Bluetooth Low Energy は超低消費電力無線通信技術ですが、周辺デバイスが常に電波を送信するように作られているかどうかは、設計次第です。心拍計のような利用している間だけ無線接続ができればよいものは、装着して心拍計測している間だけ無線通信するように設計されてるものが多いです。

胸ベルト型の心拍計であれば、たいていは、装着されて皮膚に接触したことを検出した心拍計が、自動的に計測と無線通信を開始します。腕時計型のMIO ALPHAであれば、本体右側のボタンを長押して心拍計測を開始することで、計測と無線通信が開始されます。

心拍計の計測を開始したなら、心拍計のモニタ画面<!-- c)心拍の画面-->の下にある"Connect"ボタンを押します。これでiOSデバイスと心拍計との無線接続が確立されます。

このとき、iOSデバイスの Bluetooth がオフだと、Bluetoothをオンにしてくださいというダイアログが表示されます<!-- b)-->。このダイアログの"設定"ボタンを押すか、あるいは自分で設定アプリを立ち上げて、Bluetoothの電源をオンにします。

心拍計が無線通信を開始していて、iOSデバイスのBluetoothがオンになっていれば、デバイスの一覧リストに心拍計があるはずです。デバイスを選択すれば、iOSデバイスと心拍計の無線接続が完了して、一定時間ごと更新される測定値が数値とグラフで表示されます<!--c-->。

従来のBluetooth3.0までの周辺デバイスと違い、Bluetooth Low Energy の周辺デバイスの発見および接続と切断は、すべてiOSアプリケーションから操作ができます。

また、アプリケーションがバックグラウンド状態になっても無線通信を継続できます。ですから、別のアプリケーションに移動したり、あるいはロック画面が表示されても、nRF Toolbox のアプリケーションはデータを受信し続けられます。

画面下の"Disconnect"ボタンを押すと、iOSデバイス側から心拍計との無線通信を切断します。あるいはiOSデバイスから遠くに離れて電波が届かなくなると、無線通信は切断します。

無線通信が切断すると、心拍計は再接続ができるように再接続のための電波を送信し続けます。ですから、iOSデバイスに電波が届く範囲にはいれば、心拍計を再発見して自動的に再度接続するiOSアプリケーションが作れます。

残念ながら、この nRF Toolbox のアプリケーションは、自動で再接続するようには作られていません。そのため、ユーザが画面下の"Connect"ボタンを押して再接続させます。

### クラシックBluetoothでの体験

本書は、Blutooth Low Energy を統合した Bluetooth4.0 と、それ以前の Blutooth Low Energy を含まないBluetooth3.0までのBluetoothとを区別するために、Bluetooth3.0 までの Bluetooth を、クラシックBluetooth と呼ぶことにします。

もしも心拍計をBluetooth3.0 までの技術、クラシックBluetooth の技術で作ると、どんな体験になるかを見てみます。

アプリのインスト、無線接続、利用、一緒。
ただし設定画面のみから、ユーザが、
無線接続と切断はユーザが行う。

アプリの開発、特定の製品に対して。開発。"心拍計"というジャンルは、クラシックBluetoothには、ない。iPhoneの開発になるから。

信頼できる機器だと、4桁もしくは6桁の数値(PINコード、ピンコード)を入力して接続。(ペアリング)

2年程度は通常の使い方で、電池は1日は持たない。充電式。
アプリケーションの対応が必要。ちょっと特別。

細かいところ、製品にMFiのロゴマークが掲載されている。




















#### クラシックBluetooth の無線通信技術

まず、クラシックBluetooth の無線通信技術を見ていきます。

当然のことですが、無線通信は電波で情報をやりとりするので、電波でデータを送受信する2つの何かがあって初めて通信が成り立ちます。そしてユーザには、2つのデバイスが無線で通信をして期待する動作や機能をすることが、当然だと思われます。

この当然を実現するには、2つのそれぞれのデバイスに:

1. お互いを発見する仕組み
2. 無線通信をする仕組み
3. データをやりとりするタイミングおよびデータの意味と機器の振る舞いの定義

の3つの仕組みが必要です。

このうち1と2は、Bluetoothに限らず無線LANなど、一般的な無線通信が必ず備えている仕組みです。3は、無線で接続した2つのデバイスが相互に機能するために不可欠な要素です。

パソコンであれば、インストールするアプリケーションで、様々な機能に対応できます。ですが、Bluetoothを採用する周辺デバイスは、設計時点で機能に合わせてハードウェアとソフトウェアが作り込まれる装置です。ですから、あとからソフトウェアを入れ替えて機能を変更することが、できません。ですから、この3が相互接続のために重要なのです。

<!-- TBD Bluetoothのロゴマークを掲載 -->

クラシックBluetooth は、より早い通信速度でより低消費電力で、隣り合うデバイスを無線で接続する技術として発展してきました。イメージとしては、電気配線のための電線を文字通りワイヤレスにするための技術、と思えばわかりやすいでしょう。

クラシックBluetoothでは、ヘッドセットやキーボードといった応用機器の種類や用途ごとに、通信と機器の振る舞いを決めていて、それをプロファイル(Profile)と呼びます。

そして、所定のプロファイルに適合していると認定をうけたデバイスに、 Bluetooth の青色のロゴマークの表示が許されます。これらがあるおかげで、ユーザはBluetoothのロゴを見るだけで、それが何年も前に開発されたデバイスであっても、開発販売している会社が聞いたこともない会社であっても、それらのデバイスを無線で相互接続して使えるのです。

#### クラシックBluetooth のプロファイル

クラシックBluetoothは、通信と機器の振る舞いをあわせて1つのプロファイルとして定義して、規格としているところが、ポイントになります。

通信には必ず、通信速度と遅延時間、2つの要素、


使ったiOSデバイスの周辺デバイスの仕組みを見ていきます。
これが クラシックBluetooth の無線通信技術の概要です。





月まで往復、
パケット(データの小さい塊)やりとりするタイミング、
実質の通信速度



Hands-Free Profile(HFP)
Advanced Audio Distribution Profile (A2DP)

通信はかならず

つなぐ技術

無線通信は必ず相手。
機器の振る舞い。
通信の性質。電話するときのヘッドセット、データが欠損しても、再送しない。相手の話が遅れてはしかたない、リアルタイム。音質はそれなり。音楽を聞くときのヘッドフォンでは。遅れる時間があってもいいけど、ぶっつっときれてはしかたない。

#### クラシックBluetoothとiOSの周辺デバイス

アプリとハードの構造。
SPP。
デバイス間、どのアプリ? 判定。正しいハードウェアなのか?
ただの通信路。

クラシックBluetooth を使うiOSデバイスの周辺デバイスは、Apple社とMade for iPhone Program (MFi Program、エムエフアイ・プログラム)という秘密保持契約を締結することで、初めて開発ができます。

通信を維持するだけで ~10ミリアンペア (mA)。
1500ミリアンペア時 (mAh)。電圧変換とかあるから、正しくないですが、目安として 150時間程度。

12 x 28 x 5.7 mm 110mAh 
12 x 16 x 5   mm 40mAh


通信規格が違う。

ハードウェアが違ってくる。機能と振る舞い。

アプリケーションの作り方が違う。
MFi、外部アクセサリのフレームワークとCoreBluetoothのフレームワーク。
通信制御の振る舞いが違う。アプリが完全にもっていける。PIN入力がない、接続と切断がアプリ管理。バックグラウンドで通信しつづけられる&発見、接続切断も。

Bluetooth3.0までの、
クラシックBluetoothで作ったらどうなるか。

作りやすさ。
MFiが不要。電波法とか電磁放射、その他規制やら認定やら。
多種多様なデバイス、
アプリケーションが全てを牛耳っているから、
電池消費量、使い捨てとか、半年程度。

ハードウェア、
心拍を検出、電位で、信号処理とか。増幅とかアナログの。

無線通信、
せいぜい1秒に50回。その時に、変更があれば。通信は、スループットとレイテンシ(遅延時間)。
無線通信する時間を極小。

サービスとキャラクタリスティクス。
ATT/GATT。モジュール化。値の変更。機能と振る舞いを分離している。
キャラクタリスティクスは、センサ値、機器の制御目標値と内部状態。

プロファイル、
標準プロファイル。かってなカスタムプロファイル。

アプセサリ
売ってからが大事。体験。














### アプセサリと心拍計

ここまでの心拍計の体験では、心拍値がiOSデバイスでみられるだけなのかと思うでしょう。そのとおりです。それは、nRF Toolbox が心拍計測のデモンストレーション用アプリケーションで、これは周辺デバイスの体験だからです。アプセサリの体験ではないからです。

Bluetooth Low Energy の周辺デバイスとアプリケーションとが連携して、はじめてアプセサリになります。例えば、ランニングのアプリケーションであれば、心拍値をもとにユーザにトレーニング内容の音声ガイダンスが流せます。また、心拍数をずっと計測しつづけることで、ストレスや心理状態まで推定するアプリケーションが作れるかもしれません。

このように、心拍計というデバイスが1つ登場するだけでも、iOSデバイスの活用場面が無数に生まれます。

ですが、iPhone自体に心拍計測機能が搭載されることは、ありえないでしょう。というのは、安定して心拍を計測し続けるには、腕時計型にしろ胸ベルト型にしろ、デバイスがユーザの皮膚と接触していなくてはなりません。ですが、肌にiPhoneが触れ続ける利用場面は、ランニングのように限られた場面ではあるかもしれませんが、一般的ではありません。

利用場面が限られて一般的ではなかったり、あるいは物理的に設置できないためiOSデバイスには搭載されない機能でも、無線でiOSデバイスにつながる周辺デバイスがそれらを提供することで、iOSデバイスだけでは生まれない可能性が生まれるのです。

また、心拍計というデバイスがiOSアプリケーションと連携することで、これまでなかった心拍計の活用場面が生まれます。

トレーニングでの活用はもちろんですが、iOSアプリケーションがあることで、心拍計というハードウェア単体では実現ができなかった、計測値の記録保存や解析、またネットワーク・サービスとの連携が可能になります。例えば、何百万人ものユーザの年単位での計測データがネットワーク・サービスに蓄積していれば、それらを統計的に解析することで、ユーザそれぞれの疲労度やストレスを数値化して、ストレッチング運動などでそれらを低減していく、新しいサービスが生まれるかもしれません。

周辺デバイスは、購入しやすい価格で製造するために、メモリや処理能力はなるべく小さく設計されます。また、そのデバイスが破棄されれば、内部に保存されたデータも失われます。しかしiOSアプリケーションと連携することで、単なるデバイスでは実現できない膨大な記録容量や処理能力が使えます。さらに、データがネットワーク側に保存することで、デバイスの寿命を超えてたユーザ・データの蓄積が可能となります。

そして、アプセサリとなった周辺デバイスは、もはや単なるハードウェアではなく、提供サービスの重要な1要素になります。

例えば、トレーニングのネットワーク・サービスを考えてみます。iOSアプリケーションそしてネットワーク・サービスに、心拍や走行距離などのユーザ・データが記録蓄積されます。これらのデータがあると、同じサービスを利用するユーザ間での競争や、あるいはFacebookやTwitterなどのソーシャル・メディアで達成度を共有するユーザ体験が提供できます。

蓄積されたユーザ・データは、そのサービスを使い続ける大きな理由になります。例えば、ユーザのトレーニング・データは、サービスそれぞれが独自形式で蓄積していますから、あるサービスから別のサービスにデータを移し替えることは困難です。ですから、蓄積したデータを捨て去りゼロからデータを蓄積してまで使いたくなる魅力でもないかぎり、ユーザがサービスを変更することはないでしょう。

周辺デバイスはネットワーク・サービスの収益構造を変化させます。ユーザはサービスを利用するために周辺デバイスを購入するので、周辺デバイスの売上がネットワーク・サービスも含むサービス全体の売上となります。そして周辺デバイスは、適度な周期で買い替えられます。

例えば、心拍計や活動量計などの身につける周辺デバイスは、洗濯したり落としたりして破損したり置き忘れて紛失します。ユーザは自分に責があると納得して再購入します。また、使用するうち自然と汗で汚れたり塗装がはげ外観が劣化します。1年ごとに外観デザインを変更した新モデルが出れば、外装の劣化は新モデルに買い換える理由になります。

周辺デバイスはアプセサリですから、新しく周辺デバイスを購入してデバイスを変更しても、それまでの蓄積データはそのまま利用でき、体験が引き継がれます。





## iOSの Bluetooth Low Energy 体験

#### キーワード、多様性、普及インフラ、アプリケーション、エコ・システム
#### ユーザ所有、公共物。接近、個人所有。サービスとの連携。HomeKit、HealthKit。ドライバ。

Bluetooth Low Energy の活用には必ず3つの要素、周辺デバイスというハードウェア、Bluetooth Low Energyという無線通信技術、そしてiOSアプリケーションとネットワーク・サービスが登場します。ハードウェアとソフトウェア、そして通信と3つの分野をまたぐので、そのすべてを詳細まで理解するのは大変です。

ですが、アプセサリの魅力は、これら3つの要素のかけ算で生まれます。ですから、アプセサリの素晴らしいユーザ体験を生み出すには、どれか1つの分野の専門家であるだけでは不十分です。お互いの領域の概要をも知ることが、必要です。

前節で心拍計を例にして、周辺デバイスとアプセサリの違い、そしてアプセサリのユーザ体験とサービスの収益構造の1例を述べました。この例から分かるように、技術に関わる領域であっても、エンジニアに限定せずチーム・メンバー全員で概要を共有することが、プロジェクトの成功に必要です。

アプセサリを支える技術の概要を見ていきます。

### 無線通信と相互接続

前節で心拍計をiOSデバイスに接続して、心拍を計測しました。このときに、2つのデバイスがどのような通信をしているのかを、デバイスの立場になってみます。

まず、ユーザの目には2つのデバイスが見えています。ですが、デバイスには目はありませんから、お互いが近くにあることが分かりません。2つのデバイスの間で電波を送受信しあって、はじめてお互いに存在がわかります。ところが、人間の目や耳では、この電波を知覚できません。この違いがあるために、目の前にデバイスが見えているのに無線接続ができなくてイライラすることが起きます。

#### デバイスになりきった通信体験

2人の人間がデバイスになりきって無線通信をシミュレーションしている場面を想像してみます。1人をA、もう一方をBと名づけましょう。AもBも、目をつむり耳と口だけで会話しようとしている状況です。耳で聞くことが電波の受信、口で話すことが電波の送信にあたります。

通信には必ず通信相手がいます。ですから通信は、まず相手を見つけることから始まります。まずAが、自分はここにいるよと話してから、Bからの返答がないかを聞きます。いっぽうBは、Aの声が聞こえないからをじっと聞きつづけていて、Aの声が聞こえたら、適切なタイミングで、私もここにいるよと返答します。

これで、AとBがお互いの存在を発見できました。じつは、AもBも、自分が話している間は自分の声が邪魔をして、相手の声を聞き取れません。そのため、相手を発見してから通信しつづけるために、お互いが話を始めたり聞いたりするタイミングを示し合わせます。

Bluetooth Low Energy では、一定時間ごとにBが、おーいA、と呼びかけます。AはBの呼びかけを聞いてから、聞いているよとか、新しいデータがあるよとか、返答をします。

ここまでの、AとBがやりとりを続けられている状態が、無線接続している状態です。

このAとBしかいない状況は、実際にはありえません。

2.4GHz、80MHz、2MHz、40個のチャンネル、同時に
チャンネルを次々と切り替えていく(ホッピング)、
使えないと分かっているチャンネルを、最初に示し合わせておいて使わない(アダプティブ・ホッピング)

#### Bluetoothの相互接続

Bluetooth は近くにあるデバイスとの無線通信と相互接続の技術です。無線通信を通して、接続したデバイスの機能が使えなければなりません。

例えば、Aが心拍計の機能をもっているとします。Bは通信を通じて、Aに心拍計の機能があることを知り、そしてAの使い方にしたがって通信のやりとりを行い、Aから一定時間毎に心拍値を受け取ってはじめて、BはAの機能を使えたと言えます。

パソコンであれば、アプリケーションを選んでインストールできるので、電子メールの送受信であれば電子メールのアプリケーションを、音楽や動画を視聴したければストリーミング再生のアプリケーションをインストールすれば、通信を介してサービスを利用できます。もしも将来に新しい技術が普及しても、その新しい技術が使えるアプリケーションをインストールすればいいのです。

<!-- 後方互換性 と未来-->
ですが、Bluetoothを採用する周辺デバイスは、その機能とハードウェアが、パソコンでいうアプリケーションに相当するプログラム部分といっしょになって機能するよううに設計されます。ですから新しい技術が登場しても、ハードウェアは製造後に変更できませんから、対応はできません。



ハードウェアは変更できないので、パソコンのようにアプリケーションをインストールした対応


新技術が出たからといってもハードウェアは変更できませんし、またハードウェアといっしょになって動くように設計されているアプリケーション相当部分の更新は、

ハードウェアは変更することはできませんから、

ハードウェアの機能と

がいっしょに設計されるので、新技術が出たからといって製造後に新技術変更することはできません。

#### サービスとキャラクタリスティクス

用途に応じてアプリケーションをインストールすれば、
通信を介したメールや音楽や動画の視聴をします。


ですが Bluetooth を採用する周辺デバイスは、
そのアプリケーションに相当する部分
設計時、組み込み機器なので
そのアプリケーションに相当する部分、つまり機器の
その使われ方
組み込み機器







無線接続だけでは

相互に接続するためには、そのデータがどんな意味を持っているのか、そのデータが来たらデバイスはどう振る舞うのかまで

パソコンであれば、アプリケーションをインストールして、どんな機能でもあとから追加できます。ですから、パソコンの無線LANは通信さえできればよい技術です。

Bluetooth は近くにある周辺デバイスと、無線通信をして相互接続するための技術です。

パソコンの無線LANであれば、通信さえできれば、あとはパソコンにインストールするアプリケーションで

パソコンの無線LANであれば、通信





どんな機能があるのかを知ったり、

お互いに意味があるやりとりをするためには、データの意味



無線LANと違い
無線通信
Bluetooth はすぐ近くにあるデバイスとの無線通信技術です。
無線通信技術

<!-- 無線通信は過酷 -->

相手がいついなくなるか、わからない。
省電力、聞くだけでも電力をくう。むしろ聞くほうが、電力をくう。テンプレの電波を出せばいいだけじゃないから。信号レベルもわからない。桁違い。実際に無線の受信信号の電力は8桁。

他の方式、自分たち。

<!-- 通信規格は -->


お互いがいなくなるかもしれない、Cの話し声で、AとBの会話が途切れるかもしれない。
省電力
次はAとBが通信をし続けます。
AもBも、自分が話している
次はAとBがお互いに通信をし続けるために、タイミングをどうするかを示し合わせます。


次は、お互いが話したり聞いたりするタイミングを示し合わせます。

聞くのと話すのは同時にはできません。

ですから、Aは話したあとに、Bの返答がないかを聞きます。

どちらかが、自分はここにいるよ、と話します。自分の声が聞こえる範囲に相手がいれば、私もここにいるよ、と返答してくるはずです。ですから


自分の意味、話すタイミング、聞くタイミング、聞き役、話し役、ルール。
Bluetooth Low Energy 通信規格

相手を見つけるには、どちらかが、自分はここにいるよ、としゃべり続けます。
聴き続けます。

それぞれの人は、
、周りにあるだろう他のデバイスと会話しようとしている状況です。




お互いに会話するためには、1. 耳で聞くことと話すことができる、2. お互いに話すのと聞くタイミングがわかっている、3. 言語が同じこと、が必要です。

耳で聞くことと話すことができる、

お互いに話すのと聞くタイミングがわかっている

言語が同じこと

1. 同じ言語を話せる


発見。

あいうえおの50音、
0と1のデジタルデータ、
変調。
単語、文章。



Bluetooth Low Energy は2.4GHz(ギガヘルツ、1ギガヘルツは1秒間に$10^{9}$の振動を表す)の電磁波で通信する技術です。

という

電波の送受信でお互い
の目の前には
意思や情報を伝達すること。

目の前に、Bluetooth Low Energy で接続する周辺デバイスとiOSデバイスが2つがある。

外国語を理解するがごとく。
会話を成り立たせているのは、タイミング。同じタイミングで同時に話したら、お互い聞き取れない。

Bluetooth Low Energy の開発に用いられる受信機があれば、空中を飛び交う Bluetooth Low Energy のパケットを読み取ることもできますが、そのパケットの内容を理解するには、通信規格の知識が必要です。

ですから、目の前にある2つのデバイスが無線接続できないとき、ユーザは繋がらないことに強い不満を感じます。

電波は、人間の目には見えず、また
iOSデバイスと無線接続した周辺デバイス

Bluetooth Low Energyを採用した周辺デバイスを買ってきて、iOSデバイスに接続しようと
ユーザ
無線通信で2つのデバイス

無線で通信する技術、

 でiOSデバイスと周辺デバイスが接続する様子。
無線通信。目の前に見えている。

見つけること、伝えること、やりとりすること、

あ/い

え/お

人間の声、

同じ言語、

交互に、

喋ると、


の3つの要素を組み合わせて
初めて活用できます。

多種多様な周辺デバイスが作れる


本書を手に取られた方は、自分たちのサービスと周辺デバイスを作るために 

知識を求めている


技術の組み合わせ。


心拍計、自分のオリジナル。ハードウェア、

Bluetooth Low Energy がなにかを知るには、要素ごとの知識だけではなく、それぞれの要素がどうユーザ体験につながっていくかの、全体の俯瞰が重要です。

無線通信、ハードウェア、かなり違う。

アトリビュート・プロトコル(Attribute Protocol、ATT)
ジェネリック・アトリビュート・プロファイル

(Generic Attribute Profile、GATT

### 電波で通信する
0/1を伝える

2.4GHzと言う過酷なバンド。自分たち、他の方式。

低消費電力にする工夫。

### プライバシー、セキュリティ
電波、
暗号化。

### ATT/GATT

### iOS
バックグラウンド、
ドライバ相当部分

### 柔軟性

### 開発
ドライバ、ハード。
どっちがやるねん。
定義付け、デモンストレーション。ハードとアプリケーション。
一緒に。

### 認証
各国の電波法。FCCであれば、ECMも。部分的な認証のモジュールもあるので。
組み込みしたら、本体も。電気製品としての。
設計の性能がちゃんとしていること、製造で確認していること。
Direct modeという、電波を出すためだけの規格。

Bluetoothの認証。製造方法。
会員は有料と無償の2つ。
80万円。モジュールを利用してても。40万円。
1億円以下2年以内25万円。

### この体験を電波から見てみましょう

電波、目に見えない。人間からは目に見える。
2.4GHzっていうのは激戦区。人間には感知できない。電子レンジとかあれこれ。
発見と接続
データの読み出し、コマンド、どれを読み出すか指定して、あれこれ

発見、接続、通信、切断。



電波を出すっていうのは、それだけで電力を食う。特に受信、信号レベルが電力値で8桁も変化する。増幅率を変えて、検出する。
プロセッサの2.4GHzと同じで、電力がいるん。でも、パソコンのプロセッサみたいに、あっちっちにならないのは、回路の規模が小さいのもあるけど、常時動き続けるわけではないから。

電波を如何に出さないか、電波を如何に受信しないか。無駄に。
超低消費電力、といっても、

周りに広がるもの、電波。傍受、アタック。セキュリティ、プライバシー。



アプリケーションがないとどうしょうもない。
使い方次第、
ハードウェアの形ではなくて、機能。複合できる。


### 無線通信と相互接続




電池、12ヶ月、
3日間程度、充電必要。

無線通信が微弱だとはいえ、センサー、とかが電力を消費すれば、避けようがない。

無線通信、あれこれ。完全にタイミングを合わせて通信することで。
レイテンシ、


電波の飛び方、

近接具合
レイテンシとスループット

マスター(Master)とスレイブ(Slave)
ピコネット(Piconet )
アドバタイズメント・パケット(Advertisement packet)

無線通信の超低消費電力っぷり
	タイミングを合わせて通信することで。
	1パケットは最大37xビット。1ビットが1マイクロ秒で送られる。
	1つのパケットで読み書きできる量は、20バイト。
	もちろん、複数のパケットに分割する仕組みはある。最大(512 - 3 TBD)バイト。

コマンドライクなの。

セキュリティ、プライバシー。


アプリケーションの作り、
ペアリング、ボンディング。セキュリティ・モード。必須ではない。
発見、接続と切断、通信。
バックグラウンドでも。
バックグラウンド、繋がりっぱなし。

Bluetoothのリストに一覧が出ていない。
ペアリングがなかった。PINコード、4桁の数値入力。


複数、
サービス、

ハードウェアの作り方。



### BLEの体験


### 無線通信,コマンドで通信,アプリケーション







### 使ってみる
アプリでつなぐあれこれ。

心拍計って、
どんなもの、
方式とかいろいろ
Bluetooth Low Energy の心拍計は、ハートレートプロファイルという仕様。
だから、これに準拠していれば、どのアプリケーションでもいい。
フィットネスのアプリケーションはどんどん使っているでしょう。
専用アプリケーション、ダウンロード。

心電図、心臓の筋肉の微弱な電気信号。胸に直接貼り付ける。
手首、動脈。光の反射、血流量の変動。

心拍計測を開始。
BLEのデバイス、装着、腕時計型であれば計測ボタンを押す。

計測、専用アプリ、データがリアルタイムに表示されて、保存されて、
一定心拍になるように、音声ガイダンスあるいは、ピッピという音を出したり。もちろんデバイスも出すけど、
フィットネス。

サービスをキャラクタリスティクス。

これは専用アプリ以外、
はい、おしまい。

### 何が違うねん
無線通信と消費電力
タイミングを合わせる。

ペアリングとボンディング
小さくても、プライバシー、セキュリティ。

プロファイルとサービス。
設定画面。自由さ。



### 仕様書絡みてみましょう。


2013年7月の時点で、Bluetooth SIGが承認しているプロファイルは、つぎの14つです。

[Profiles | Bluetooth Development Portal](http://developer.bluetooth.org/gatt/profiles/Pages/ProfilesHome.aspx)

- アラート通知 (Alert Notification)。
- 血圧計 (Blood Pressure)。
- 自転車のパワーメータ (Cycling Power)。
- 自転車の速度とペダル回転数 (Cycling Speed and Cadence)。
- デバイスの発見 (Find Me)
- 血糖値 (Glucose)
- 体温計 (Health Thermometer)
- 心拍 (Heart Rate)
- 入力装置 (HID OVER GATT)
- 位置と経路誘導 (Location and Navigation)
- 電話の警告(Phone Alert Status)
- 近接 (Proximity)
- ランナーの速度とペース (Running Speed and Cadence)
- 時刻 (Time)

### カスタムなプロファイルの製品群を見てみましょう




## ユーザ体験と無線通信規格

最初に Bluetooth Low Energy に限らず一般的に無線通信規格は、どのような意味と役割を持っているのかを見ていきます。

あたりまえのことですが、通信には必ず2つのデバイスがいます。そして2つのデバイスは、メーカーや製造年さえ異なるでしょう。そのようなデバイス群が無線通信で利用し続けられるのは、無線通信規格を作られて、その規格の適合試験と承認制度が運営されつづけているからです。

無線通信で2つのデバイスが通信をして、機能するためには次の3つの仕組みが必要です:

1. 発見。2つのデバイスが、互いに存在を知ること。
2. 通信。2つのデバイスが、双方向にデータをやりとりすること。
3. 振る舞い。やりとりするデータの意味と振る舞いが定義されていること。

まず、2つのデバイスが、お互いにお互いの存在を発見する仕組みが必要です。ユーザは、目の前に2つのデバイスを並べて無線接続をさせようとしているのですから、デバイスが互いを発見するのは当然のことと思います。ですが、デバイスの立場になると、人間に例えれば、目をつむり耳と声だけで周囲に誰かいないかを探り当てようとしているようなものです。

目で見て見える、電波の伝搬、電池が切れている。齟齬。思い込み。



どのような周波数で、どのようなタイミングで
そのデバイスが何者か

お互いにお互い、
自分は何者か、機種番号やモデル名、どんな機能を持っているのか、などの情報、周波数とそしてタイミング。

2つのデバイスが目に見えているので、これはあたりまえのことに思えます。ですが、2つのデバイスはユーザのように目で周囲を見ることはできません。


デバイスの立場になってみると、

ユーザにとっては、自分が2つのデバイスを

ユーザ

Bluetoothのように、規格を作り、その規格に適合したものにBluetoothのロゴ掲載を許可する運営をし続けている
Bluetooth という規格


Bluetoothの役割は、通信で機器が機能すること (ロゴ、ブランド)
発見、お互いの存在をお互いが知る
通信、双方向にデータをやりとりする
データの意味と振る舞い(プロファイル)、組み込み機器
無線LAN(通信規格)とWiFi(相互接続の認証)の違い  (わかりにくい例えだけど)
だから、Bluetoothロゴがついていれば、何年も前に発売されたものでも、使える
人間に例えると、空気が媒体の可聴音、同じ言語と文化圏。
無線通信は、出会いと、ご縁、それとお互いの理解





Bluetooth Low Energy は、会社や社会のあり方も変えていきます。

例えば、腕時計型デバイスが Bluetooth Low Energy で内蔵した加速度センサーのデータを常にスマートフォンに同期するとします。個人利用であれば、運動量をモニタして健康維持に役立てられるでしょう。会社であれば、活動パターンから感情や気分そして体調までを推定して、オフィスのよい雰囲気作りに役立てられるかもしれません。社会にとっては、個々人が健康で活発でありつづけられれば、社会の活力の源となるでしょう。

Bluetooth4.0 は、それまでの Bluetooth3.0 の技術に Bluetooth Low Energy を統合したもの、そして Bluetooth4.1 は、Bluetooth4.0と後方互換性を保ちながら改良を加えた通信規格です。

1秒にせいぜい数十回、1回にせいぜい数十バイトの通信ができれば十分だが、電池消費量は小さくしたいといった、
Bluetooth Low Energy は、スマートフォンのように単体でインターネットに接続できる技術ではありません。

インターネットが時代を変えると、2000年頃に大きな話題になりました。駅前ではADSLモデムが配布までされ、高速なネットワークが、またたくまに家庭に普及しました。それから、通信端末はパソコンからスマートフォンに、固定回線は携帯通信へと移り変わりました。14年が経過した現在は、1人が1台のスマートフォンを所有し、決済そして音声とテキストが統合されたメッセージング・アプリも普及して、成熟したモバイル市場が生み出されました。





よいサービスを考えだすために、





しかし、様々な物とネットワークの間には、これまで深い溝がありました。この溝を埋める無線通信技術が、本書がとりあげる 超低消費電力無線通信技術 Bluetooth Low Energy (ブルートゥース ロー エナージー) です。Bluetooth Low Energy は Bluetooth4.0 の規格の1部です。


時代の推移:
画面を見ている時代、
ネットワークと一緒にいる時間、

会社経営的に:
システム的な、ハードだけじゃなくて、サービスまで含めた。
可能性、でっかい。



この IoT あるいは IoE の時代は、もうすぐ近くに来ています。いまでは、スマートフォンの地図や路線図の検索アプリケーションに表示された経路通りに移動すれば、最適な経路で目的地にたどり着けます。スマートフォンを通じて、ネットワークにある交通網の情報と最適な経路検索結果が、人に作用しているわけです。これは、人間が通信回線の1パケットになっているのと違いはありません。

しかし、様々な物とネットワークの間には、これまで深い溝がありました。この溝を埋める無線通信技術が、本書がとりあげる 超低消費電力無線通信技術 Bluetooth Low Energy (ブルートゥース ロー エナージー) です。Bluetooth Low Energy は Bluetooth4.0 の規格の1部です。

Bluetooth Low Energy は、コイン型電池1つで数年間も無線通信ができます。ですから、わずらわしい配線に悩まされることがなく、また電池の充電や交換の手間がかかりません。そして、物の機能をサービスという概念でモジュール化したこと、そしてデータベースのサーバ・クライアント構成をとったことで、従来の Bluetooth では実現できなかった、多種多様な物との無線接続が可能になりました。

ですが、新しい無線通信技術が普及するには、その通信相手が同時に普及しなければなりません。この大きな障壁は、Apple社が2011年に、世界で初めて Bluetooth4.0 に対応したスマートフォン、iPhone4s を発売したことで、一気に打ち破られました。

2011年のこの出来事から、Bluetooth Low Energy を使うiOSデバイスと連携するユニークな製品群を発表するベンチャーが続々と登場しています。












を活かしたユーザ体験は、分野や背景知識の異なるメンバーが目的や知識を共有して協業するチームから生まれます。

本書は、そのようなチームのためのハンドブックです。









2014年、iOSの誕生から7年が経過して、世界に広く普及したiOSデバイスとAppStoreが、成熟したモバイル・アプリケーションの市場を作り上げました。アプセサリは、iOS8の登場とともに、次の成長への鍵として注目されています。

その次の成長は、ネットワークとアプリケーションそしてiOSデバイスで完結するこれまでの時代から、それらが我々人間が住むリアルな世界とつながり相互に影響を与え合う新しい時代へと移ることで、もたらされます。この日常とネットワークとの連携の鍵となるのが、アプセサリなのです。



Apple社も、iOS5からiOS8に至るまでの3年間に、iBeacon、 Apple Notification Center Service (ANCS)、 HealthKit そして HomeKit と毎年矢継ぎ早に、iOSの新しい魅力となるアプセサリの世界を切り開いてきています。

Bluetooth Low Energy は、iOSを支える根幹技術の1つとして知っておくべき技術となってきています。

たとえば、iOS7で統合された新しい位置と近接の検出技術 iBeacon は、 Bluetooth Low Energy の技術を使い識別子をブロードキャストするビーコンとiOSデバイスを組み合わせて利用します。アプセサリを開発するつもりなどない、アプリケーションやサービス開発においてさえ、我々の住むリアルな世界とiOSデバイスとを連携させるためには、Bluetooth Low Energy の基礎知識が欠かせないのです。



















電池消費量が小さい、電池交換頻度、充電式にしなくてもいい。使い捨てまたは。
iOSデバイスとの連携、
多種多様、従来に無いジャンル、オリジナル。
とはいえ、前例のないハードウェア、使い方を想像できない。市場に広まるまでの時間。
フィットネスやサイクリングでは、計測、無線のもの。







この章は、 Bluetooth Low Energy とはなにかを、俯瞰していきます。


多種多様、従来のBTを侵略するものではなく、
無線通信技術、
環境、iOS、
アプセサリ、

Bluetooth Low Energy 




Bluetooth Low Energy は、多種多様なハードウェアを実現できる通信規格でもあります。無線通信には必ず通信相手がいます。

Bluetooth
が使われる周辺デバイスは、ハードウェアとして最初から設計されるため、機能の追加や変更が


Bluetooth 3.0
アトリビュート・プロトコル(Attribute Protocol)、
ジェネリック・アトリビュート・プロファイル(Generic Attribute Profile)
モジュール化
サービス、キャラクタリスティクス
プロファイル

多種多様
その超低消費電力

Bluetooth Low Energy 以前のBluetoothを採用した周辺デバイスは、スピーカやヘッドセットなど、分野が限られていました。

ですが、Bluetooth Low Energy は多種多様な周辺デバイスを実現できる技術です。


Bluetooth Low Energy 
ユーザの体験





電池がもつので充電式にしなくてもよくなること、半導体素子などの製造費用が安価であること、また多種多様なハードウェアを設計できる特徴があります。

また、iOS5およびiPhone4s以降のiOSデバイスが Bluetooth Low Energy に対応しています。この市場に向けて、iOSデバイスと周辺デバイスとの間にあるラスト1mをつなぐ無線通信技術である Bluetooth Low Energy を用いた様々な周辺デバイスが、いままさに開発そして販売されてきています。



Bluetooth Low Energy がなにかを知るには、それぞれの要素がどうユーザ体験につながっていくか、全体の俯瞰が重要です。

Bluetooth Low Energy を利用した周辺デバイスは、よく アプセサリ (Appsessory) と呼ばれます。これは、アプリケーション (Application) とアクセサリ (Accessory) を組み合わせた ( App + cessory ) 造語です。この造語は、iOSアプリケーションと周辺デバイスというハードウェアが連携してはじめて、素晴らしいユーザ体験につながることを表しています。





Bluetooth Low Energy は、健康やフィットネス機器など、製造コストや電池消費量への要求が厳しく、Bluetooth 3.0 までの無線通信技術では応えきれなかった分野に向けて開発された技術です。小さなコイン形電池1つで年単位の無線通信ができ、多種多様な周辺デバイスが設計できる技術です。したがって、スマートフォンと周辺デバイスとの間にあるラスト1メートルをつなぐ、重要な技術になっています。





このような Bluetooth Low Energy への注目度の高まりに答えるように、無線通信規格そして組み込み機器開発の素晴らしい書籍が登場してきています。しかし、本当に Bluetooth Low Energy を活用するには、ハードウェアから無線通信そしてアプリケーションといった要素技術を学ぶだけでは不十分です。全体を俯瞰して要素技術がどう有機的に関わりあっているかまでを、理解することが必要です。







周辺デバイス

したことで、世界中にいるiOSユーザに向けて、Bluetooth Low Energy に対応した周辺デバイスの開発や販売が一気に

として注目されています。


使い捨ての設計もできること、
製造費用が安くなるように、また
ローコストで製造ができること、また電池がもつので充電式にしなくてもよいこと、さらに多種多様なハードウェアが開発できるよう
工夫されてい

iOSデバイスと周辺デバイスの間にある







Bluetooth Low Energy は、Bluetooth という単語が入っていることからわかるように Bluetooth 4.0 から統合された技術です。超低消費電力にするために、Bluetooth 3.0 までの無線通信技術とは互換性がありません。ですから、 Bluetooth 4.0 は Bluetooth 3.0 プラス Bluetooth Low Energy 

Bluetooth 3.0 までの

Bluetoothという名前が入っていますが、Bluetooth




心拍計は市販品、アプリケーション、ブランド化。

としては、まさにそのとおりです。
そして







Bluetooth Low Energy の周辺デバイス、これは


ここまでは Bluetooth Low Energy の周辺デバイスの体験です。



日常生活においても、

適切なトレーニング強度を保てるように、

iPhoneが心拍を搭載することはありえない。

データの蓄積
統計データの学習による判定
サービス(倒れたり、体調の計測、予測。医療サービス)
 
 のアプリケーション

まとめ的に、体験。アプリがないと意味がない。画面を見ていても、心拍とかのデータ、加速度とかのデータ、統合。
あるいは、心拍の管理、音楽の再生とか、体験につなげるために、リアルなデータ。iOSデバイス、データ、通信、ハブ。
場所のロギング。倒れていたら、心臓の異常。


心拍計、接続。
省電力。
通信、発見、接続、読み書き。
iOSアプリケーション、接続管理。

セキュリティ・モデル。
盗み見、デバイス横取り。

クラシック Bluetooth と違うところ、
ちょと詳しく。
プロファイル
サービス
キャラクタリスティクス
GATTサーバ、クライアント、
セントラル、ペリフェラル。
接続の制御、

## ほげ

もう少し詳しく書くと、Bluetooth Low Energy は、Bluetooth 3.0 までの無線通信技術では電池消費量や開発用途の要求が合わなかった分野に向けて開発された、コイン型リチウム電池1つで1年程度の無線通信をし続けられるほど超低消費電力な無線通信技術です。

Bluetooth 4.0 は、Bluetooth 3.0 と Bluetooth Low Energy とを1つに統合したものです。2011年に発売された iPhone4s が世界ではじめて Bluetooth 4.0 に対応してから、iOSデバイスと周辺デバイスをつなぐ無線通信技術として活用されています。

Bluetooth Low Energy は、データ量が小さく通信頻度もさほどないが無線接続し続けたい用途、例えば心拍センサーや家電のリモート・コントロールといった分野に適した技術です。








本書は、CoreBluetoothフレームワーク のクラス構造や使い方を、Bluetooth Low Energy の仕組みに基づき、なぜそうなっているのかまで踏み込んで解説します。また、ハードウェアと連携するアプリケーション開発に独特のノウハウを述べます。


ハードウェアとソフトウェアの基礎知識や、試作品を作る実践的な知識と経験、そしてサービスが求める数量のハードウェアを製造するやりとりなど、iOSアプリケーション開発でこれまで接点がない分野の知識が必要です。












す。Bluetooth 3.0 までの無線通信技術は、用途ごとに相互接続が確保した高速なデータ通信を提供してきました。これによりヘッドフォン
配線の無線化


Bluetooth 3.0 
無線接続し続けたい、
でも充電とかは…
電池消費量がシビアな用途。

カバーしきれない


2011年に規格が公開された Bluetooth4.0 は Low Energy
2011年に規格が公開された Bluetooth 4.0 で、Bluetooth の規格の一部として統合されました。

使い方、
簡単なしくみや用語、
歴史、取り巻く環境。
BLuetooth Low Energyの歴史、
iOSのアクセサリ機器のインタフェース、流れ

iOSアプリケーション、周辺機器開発、技術的なもの。


Bluetooth Low Energy をもちいる開発は、アイディアが技術的に実現可能かを確認しながら、イメージをつかみ具体化していく繰り返し作業からはじまります。短期間になんども試作を繰り返すためにも、自分たちで実現可能性をちゃんと理解するためにも、自分たちでモックアップと簡単な動作をする回路を組み合わせた試作をすることが大切です。

# Bluetooth Low Energy のある世界

新しい無線通信技術の普及には対応デバイスの普及が不可欠です。2011年に発売されたiOS5を搭載するiPhone4sが Bluetooth4.0 に対応したことで、世界中に広く普及しているiOSデバイスという接続先ができ、文字通り一夜にして巨大な周辺機器市場が誕生しました。これが Bluetooth Low Energy が注目されている理由です。

この章は、 Bluetooth Low Energy という技術で何ができるのか、また2010年から始まる Bluetooth Low Energy の歴史を通して、技術情報やユーザ体験の全体像を見ていきます。

## iOSデバイスとBluetooth Low Energy

iOSデバイスが牽引。PCとの相性、よくない気がする。従来周辺機器でしょ。
動き続けてデータ収集的な。モバイル機器と組み合わせる、もしくは家の固定用。PCではない。マウスとキーボードのベターだろうけど。
iOSデバイスの話。

### 周辺機器の1例
周辺装置、
iOS8からHealthKit。

### 新しい位置と近接の検出技術
ビーコン

### iOSデバイスとホーム・オートメーション
音声コマンド、対応。

## Bluetooth Low Energyとプロトタイピング
事業を目指した、ライフな事業。
クラウド・ファウンディング。事業が成功するかいなか。もともとは初期投資。ハードがからむと、事前予約販売に勘違いされがちだけど。

### 製造メーカとして
Haxele
Solid
日本でも。


## 技術的なお話
### クラシックBTとBLE
音声とかあっち周り。
iOSでの扱い。
### インタフェースとして
### モジュールとは
技適やらあれこれ。

## 歴史的なお話

## 開発環境的なお話














本書は Bluetooth Low Energy と区別するために、Bluetooth3までの無線通信技術を、クラシックBluetooth と書きます。


基礎知識
ユーザ体験

始まった ハードウェアやソフトウェアの開発環境やアクセサリ開発の変遷


新しい技術は常に万能ではありません。新しい技術は、これまにできなかったことを可能としますが、また適さない使い方もあります。企画会議やチーム・メンバー全員でのブレイン・ストーミングでは、適切なアイディアを出し議論をするために、たとえ担当分野が技術ではなくてもBluetooth Low Energy の全体像や基礎知識が不可欠です。

Bluetooth Low Energy に注目する理由は




Bluetooth3までの近接無線通信技術では製品が作りにくい領域のために開発された、無線通信の方式からして従来のBluetoothとは異なる技術です。



# Bluetooth Low Energy がある世界

レイヤを垂直にまたがる。いままでにある要素が、いままでにないものに。

繰り返し同じことを書くと思うけど、そこは勘弁してね。

## BLEの概要

どんなものなのか、仕組み。ちょっと使えるまでを見てみる。
BLEっていうのは、これまでのBTと違っている。

### ちょっとした仕組み

ハードがあってiPhoneがあって。
アプリを起動したら、データが取れる。ペアリングが必要な場合もある。
接続と切断、アプリケーション、バックグラウンドでもデータが取れる。
半年くらい電池が持つ。

### この辺りの仕組み。 ### 接続系の使い方

中身を見てみる。
デバイス、アドバタイズメント。デバイス名。
iOSアプリ、CoreBluetoothフレームワーク、検索、発見、接続、読み書き。
セキュリティ、暗号化。これはiOSが管理。ペアリング/ボンディング。

アプリが、データの読み書きとか全てを制御する。

クラシックBTとは違う。速度とか、電力とか。用途に合わせた。
SPP、プロファイル。縛り。認証チップ。MFi。足りない部分。ハードウェア。
電池消費量、充電式。高速通信ができるけど、接続管理はユーザ。センサ系、有象無象の。
敷居が高かった。

デバイスの発見
	ペアリング

データを読み書きするのは、接続がいるけど。

接続しない使い方もある。同時通報、一方向のデータの伝え方。ビーコン。

### 接続しない使い方もある
ビーコン系とか、データの周囲への同報。


### ハードウェアのあれこれ
s
モジュール、小さい、無線通信。
お安く、1チップ、開発、ユーザのアプリケーション。通信と一緒に処理。
処理能力。
クラウドファウンディング。1stロットを。
開発のリソース、コストが1/10程度。簡易な。

## 時系列ストーリー

iOSだから、そんな感じで。
時代をしるのも。失敗も含めて。
Bluetooth Low Energyが登場して、注目されるまでのストーリー。
背景や事情を交えながら。主語が大切。

### これを見るときの視点は

チームの構築と体制
 企業が入っているかどうか、企業内か、外部からか
 独自の小規模

プロトタイピング環境
 Arduino、サブレー、mbed フィジカルコンピューティング
 アプリ側から。techBASIC、Konashi。

事業化のプロセス
 Makerの支援体制(資金、試作、ビジネス・モデル、専門家のサポート支援、製造)
 クラウドファウンディング

日本の電波法、技適
 ソケットありきから、

半導体のところ、モジュールのところ
 3社ある。開発環境、無償化、手軽か。ユーザフォーラム。

Bluetooth SIGのところ
 つい最近までEPLが無償。

アプリケーション。これは? むりね。
 意外と、危険モードとか。

### 2011年、はじまり
iOS5、iPhone4sの年。

黎明期、これなんだろう?

6月、WWDC、iOS5。CoreBluetooth。なんだろう?
Bluetoothのアクセサリが開放されるのだろうか。

従来のBluetooth3.0まで、ケーブルの無線化。だから繋がりっぱなし。無線通信、無線LANみたいな、アプリで。
Bluetoothという規格のもとで、任意の機器が接続できる。
相互接続、相手は組み込み機器だから。音声通信とか用途を決めて、プロファイル。データの形式。
用途ががっちがっちに固定されて、任意のデバイス作りにくい。MFiであれば作れた。

当時のBluetoothは。周辺機器として。ヘッドフォンとか規格で決められた周辺機器。それ以外?
SPP、これはMFiの対象。作るとしても、消費電力でリチウムイオンポリマーバッテリー、1周間、
充電と電池管理、製品の価格。それしか解決方法はないが、しかしMFiの手間が。
当然ながら、MFi。技術情報も閉じている。おそらく認証チップ。
Bluetoothの、特定のアプリとしかつながらない。でもSPPにはそんな機能はない。ただの通信路。
規格にない部分をAppleが独自の規格で上乗せ。Appleは、独自技術はMFiの対象とする。とても自然な流れ。

それが開放されるのかなと思った。周辺機器の豊かな世界を開こうとすれば、勝手に作って、例えば販売するときに認証させるとか。アプリケーションはストアでコントロールできるiOSであれば。

iOS5、CoreBluetoothフレームワーク。
なんだろこれ? iPhone4s、 10月発売、わっほ。Bluetooth4に対応、つまりBluetooth Low Energy。
その時は、コイン型電池で1年位通信できる、従来Bluetoothとは違う、MFiはいらない。iOSでアプリ開発ができる。
あれこれ。

Bluetooth Low Energyってなんだろう? 
情報はない。技術は、仕様書を読む?
情報、Bluetooth Low Energyハンドブック、2012年の冬。テキスト。
ハードウェア、規格、半導体、iOSアプリケーション開発。

### 2012年、プロジェクトが動き出す。

iOS6の年、iPhone5の年。ペリフェラル+セントラル。周辺機器にiOS自体がなれる。

例えばリモコンとかだと、Bluetooth4.0、複数のデバイスを接続。ネットワークの接続のトポロジが、セントラル-Nのペリフェラル。なので、同時に接続、iOS側をペリフェラルにするしかなかった。
周辺機器としてのリアリティが強くなったなと思った。

MFiがいらない、手軽っぽい?
Bluetooth SIG。情報を出し始めた。特に、Nordic Semiconductor社、日本、山崎さん。
ブランクなモジュール。
開発環境。出来る人はできる。

半導体。これが無いと始まらない。でも従来のBluetoothとは、違う。
大手、ホシデンや太陽誘電も出している。商売のやり方が違ってしまう。

ハードウェアとファームウェア、できる人とできるところ。

モジュールのメーカの立場とは。モジュール。高周波の回路、デジタル回路は極論、配線が繋がっていればいい。
2.4GHz、電波を出すもの。配線の長さや太さが、電波の飛び方に影響する。また、"きれいな電波"、各国の承認、Bluetoothの承認。

何かといえば、ファームウェアを誰が開発するのか?
半導体、1チップか2チップ。通信を制御する部分と、装置を制御する部分。ケースバイケース。
BLEであれば、規模が小さい、安くしたい = 半導体の数を少なく。今のBLEのチップ自体は、用途が1チップで収まるだろうというので、通信制御しつつ、ユーザのアプリケーションも実行できる工夫ができてた。
1チップ、実装のコスト、実装の手間、半導体のコスト、大きさ、消費電力(2つチップがあるよりも、1つのほうが小さくできる)、あらゆる面で、利用場面にあう。

だが、従来であれば、プロファイル自体に使い方が入っているから、例えば操作ボタンを付けたいとか。
音の再生制御で、早送りとかボリュームとか。タッチとかボタンとか、いろいろある。ペアリングのときのLEDの光らせ方とか、ちょっとした、でも製品ごとに違うもの。
カタログにはないけど、メーカーごとにカスタム。ちょっとしたカスタム。通信プロトコルとかそういうところはいじらなくてもいい。面倒なところはモジュールに。で、専売で万単位でまとまった販売、開発費は薄く広くで回収できる。製品の会社は、自分で厄介なところをやらなくてもいい。手間が小さい。

MFi。iOS自体も、Bluetooth LEの違いに対応。
特徴は、少量のデータに特化。例えば心拍であれば1秒に1回、心拍も最大200程度だから、せいぜい2バイト程度。

クラシックBluetooth、接続と切断まで、アプリケーションから。
ドライバ相当のレイヤが入っている。

年表をどこかで

このころ、Kickstarterでいろんなプロジェクト。Pebble、決済用デバイス、腕時計の心拍計とか。
同時にHaxelleatorとか、ハッカソン+企業支援、VC+製造。1stロットの売上、フィードバックで。

2012年の終わりぐらい、カシオ。腕時計。最初はAndroidのみ対応。iPhoneからはつなぐこともできない。
実はBLEの規格もいろいろある。通信路自体を暗号化もできれば、必要な部分だけを暗号化とか。たぶん通信路自体を暗号化するのはiPhoneは対応していないから、そういう違いなのかもしれない。

次に出たモデルは、外観は全く同じだけど、iPhoneに対応していた。専用アプリケーションで、メール通知とかに対応。
この時代は、アプセサリ。アプリから完全にデバイスを操れるが、iOSは何も手助けしてくれない。メール通知とかそういうiOSが持っている機能は、その他のアプリから取得する方法は、iOSにはない。ノーティフィケーションとして、明示的に出してくれていれば別だけど。iOSにはそんな機能はなかった。

Konashiがで始めて、プロトタイピング。

Arduinoのプロトタイピング用のシールド。

### 2013年
iOS7の年。
iBeaconと、ANCSの登場。iOS7だから、2013年

雰囲気メガネ。

iBeaconは注目された。iOS7は、デザインの大幅な変更と見た目は変わったけど、本体はiPhone5sになったが、それが新たな強烈な魅力があるわけでもなく、標準アプリの変更も、素晴らしいが、3rdの取り込みにしか見えない、本質は?

9月辺りから話題になりだして、12月あたり。ハッカソン。
大垣市で4回開催。これは新しい位置と近接の検出技術。経営、企画、デザイナ、エンジニア、バリスタ(コーヒ店舗経営者)、高校教師、多彩な。

### 2014年
iOS8。

mbedのBLE対応。
Arduino系のガジェット。

開発環境。書籍。アプリ。アプローチ。

日本でも、

### 日本での

NECカシオ
Meaias
リモッピ、3万台、Keyfobという定番商品。先着プレゼント。

G-Shock、カシオ、腕時計。
通知がわかる。ウエアラブル・デバイス

盛り上がらない。

### ソーシャルファウンディングと

速度、規模、立ち上げ。

タイミングのよさ。ウェブサービスがとことん広がり、アプリ単体の可能性が出尽くしたか?
ゲーム、ソーシャル、メッセージ、それら大手。市場、それぞれがインフラとして、集金。

それを皮切りに、Kickstarterなどのソーシャルで、プロジェクト。
ビジネス・モデルにハードウェアが要素としてある、投資家。プロジェクト。やはりKickstarter。1stロット。
個人というよりも、市場調査的な。または、運動量的なデバイス、スマフォ要素でサービスに。

まだまだ小さいけど。

iBeacon、商圏。位置と近接。屋内、自由に設置、アプリとビーコンが紐付けられるという。
Apple社自体は、2年後、買い替えタイミング。iOS5からの、iOS7。

Apple Notification Center Service、雰囲気メガネ、Apple独自の周辺機器。
多様性、腕時計が無数のブランド、個人ブランドすら登場する、ハードウェアが成熟すれば、それはパーツとして。
レイヤ、専業化が進めば、品質の高いものが、劇的に安く。同じものなら安く。

### iOS8の
MFi。
HomeKitやHealthKit。iOS8から、
実にiOS5から3年後。Apple独自の技術。HealthKitは、一般品。
HealthKitは、データ集約。いままでアプリケーション自体が収集しないとけいない、デバイスドライバ。
HomeKitは、音声コマンド、常時Siriが稼働する。

盛り上がりとしては、ハードウェアをビジネスに取りこんだサービスがこうちく、インフラになり得る。
それを支えるのがiOSとMFiの戦略。

一般的な日常の場面、Apple独自の世界、日常の世界。iOSが日常の生活。

## BLEの周り(簡単にトピックス、販売とかそっち視点で)
外の会社で話していたあれこれ。

商売として

事業計画(予算、不測の事態への対応のコスト、回収などリアルにあれば、無料交換)
立ち上げ期。よくあるのは不具合があれば、まずは無料交換。その後、回収? 故障解析、次のモデルへのノウハウ。

価格の納得感
 入手性、ポチれること。
  存在していることを知ってもらう
  手で触れる
正しくゴミに。捨ててもらうまでが計画。使ったもらうよりも、その後。メンテナンス、回収コスト。

Kickstarter
1万個のサンプル、リアル店頭。それだけでかなりお金を使う。
宣伝、ユーザ評価、口コミ、もちろん同業者からのそれとはわからないdisりも、可視化される。

どの程度売れたらいいのだろうか
 5000円、1万円、1.5万円以上。
 ご町内に一人、1億人、1000人に一人、10万個/年。1万円ならば、10億円。コンビニ2億円、5つ分。
 利益は少ない。一人頭人件費1000万円として、粗利益30%、会社の成長を全て人に当てたとしたら、3億円、最大30人。
 開発のコアメンバー、経営、企画、広告、技術、コミコミ常時10人チームまで。

BLEの規格と密接に結びつく商品企画

ブロードキャストなのか、接続なのか。データを受け取るタイミング、取り逃しが許されない
どの程度のセキュリティ?
トポロジ。同時接続数は10。4.0か4.1か。中継? 記録をもたせる?
開発、デバイスでできることが体験を変える、インタラクション、繰り返し。

ラスト1mをつなぐ技術、モバイルなデバイス、外部拡張ができない。過去にあったインタフェースを省略すると、後方互換性が保てない。よほどの慎重さで考えるしかないもの。
無線ものは、特殊な規格は使えない。周辺機器、エコシステム。BLEは今後10年は使われるでしょう。

面白いのが、モデル。
デバイスの概念、さーびすという単位。機能をアトミックにモデル化。その中には、キャラクタリスティクスという読み書きするものが。変更通知。
ハードウェア。iOSアプリケーション、オブジェクト指向。それと相性が良い。
サービスは継承ができる(インクルードサービス)。キャラクタリスティクスを消し去ると、後方互換性ができないが、機能の追加。バージョンで検索。

モジュール。
SoC、ワンチップ。コスト。RFと認証。あれこれ。だからモジュールで。もちろん、極端に物理制約、誰が作っても同じ半導体。
従来モジュールメーカ、アプリケーション、ユーザの。開発をするのか? ユーザ体験が絡むから、技術と不可分。

Cortexi-M0からM4Fまで。

BLEの登録、25万円、80万円。
モジュール 500円前後。1000個単位の量産であれば。もちろん基板やケースにパッケージ。1000円から2000円で、かなりできるかもしれない。金型とかデザインとか設計コストとか。

大手はやりにくい。小規模なところ、小回りの聞くところ。体制を揃えて。製造で収益が上がるから。
BLEはとにかく、変化がある。企画しつづけるものになる(消耗品)。小さいから。

デバイス、MVC。

### 試作との違い、
危険の解析とか。アプリケーション。これは? むりね。
 意外と、危険モードとか。

## BLE周り、主に技術な視点で

### BLEまわり
### クラシックBTとBLEの違い
### 接続と非接続、ブロードキャストと通信
### カスタムプロファイルと柔軟性
### 一般的なデバイス、どんなものがあるのか
### MFiなBLEのもの

### 一般的に iOSの周辺デバイス、インタフェース
### 実際に開発するなら
### AndroidやWindowsの対応
要素、ハードウェア、OS。柔軟さ。
ドライバ

## BLEの基本的なところ(詳しい)
### 規格の歴史
### ネットワークのトポロジ
### プライバシーとセキュリティ
### 他の無線通信都の比較

## 開発体験













































































































































































Bluetooth Low Energy のネットワーク・トポロジーには、セントラルとペリフェラルという2つの役割があります。前節で例に上げたテレビのリモコンの場合は、テレビがセントラル、リモコンがペリフェラルです。iOS6では、iOSアプリケーションはセントラルにも、ペリフェラルにもなれます。つまり、iOSアプリケーション自体が、テレビのリモコンとして振る舞うことができます。

### アクセサリとiOSアプリケーションの連携

アクセサリとiOSアプリケーションの連携には、その間をつなぐオペレティング・システムが、連携に必要な機能を提供していなければなりません。クラシックBluetoothと異なり、Bluetooth LEを使うiOSアプリケーションは、MFiプログラムがなくても一般開発者プログラムだけで、開発とAppStoreの承認がでるようになりました。それだけではなく、Apple社は、連携に不可欠の機能を提供しています:

* デバイスの発見と接続
* アプリケーションがドライバ相当の機能をもつ
* セントラルとペリフェラルの両方になれる
* ユーザ通知機能
* バックグラウンド動作

#### デバイスの発見と接続

Bluetooth LEデバイスの発見と接続は、iOSアプリケーションの役割です。iOSは、接続などに、何も関与しません。クラシックBluetoothは、ペアリングおよびデバイスへの接続は、設定アプリでユーザが操作しなければなりませんでした。どのようなBluetooth LEデバイスがあるか、どのデバイスに接続するか、また切断した時の再接続処理などは、iOSアプリケーションの役割です。例えば、Bluetooth LEは、接続が切れたならば、切れたままにする通信規格です。もしも再接続が必要になる都度、ユーザに接続操作を要求していたら、ユーザはいらいらするでしょう。

#### アプリケーションがドライバ相当の機能をもつ

Bluetooth LEデバイスとの接続はiOSアプリケーションに任されているため、パソコンのデバイス・ドライバに相当するソフトウェア、接続したデバイスの動作を制御する機能も、iOSアプリケーションに実装することになります。パソコンのように、iOSにドライバ・ソフトウェアをインストールすることは、不可能です。もしもそんなことを許せば、セキュリティや安定動作などの、iOSが提供する価値が損なわれるでしょう。

たいていの場合、iOSアプリケーション開発者がドライバ相当の機能を実装することはありません。市販されているBluetooth LEデバイスは、たいてい製造開発会社からiOSアプリケーション開発者に、そのデバイスを使うためのソフトウェア開発キットが提供されています。そのデバイスに対応するiOSアプリケーションの数が、売上につながるからです。

また独自仕様のBluetooth LEデバイスを開発する場合は、iOSアプリケーション開発者ではなく、デバイス開発者がドライバ部分を担当します。これは、デバイスの正常動作を確認するために、ドライバ部分も含めて作ることが、必要だからです。

#### セントラルとペリフェラルの両方になれる

Bluetooth LEのネットワークは、1つのセントラルに複数のペリフェラルが接続する、1対N接続のスター型です。1つのiPhoneに複数の周辺機器が接続するため、iPhoneをセントラル、周辺機器をペリフェラルにします。

iOS5は、セントラルの機能を提供しています。iOS6は、セントラルに加えてペリフェラルの機能も提供されます。iPhoneがペリフェラルになると、例えばBluetooth LEのワイヤレス・マウスとして振る舞うようiOSアプリケーションが作れますから、iOSアプリからパソコン操作もできるでしょう。

iPhoneがペリフェラルになると、Bluetooth LEデバイスのプロトタイピングが容易になります。iOS5の時代は、ペリフェラルになる組み込み機器向けのBluetooth LEデバイスの開発セットを使うほかありませんでした。このために、組み込み機器の開発手順の学習が必要でした。さらに、たいていのプロトタイピングは加速度センサを必要としますが、その回路も作らねばなりませんでした。iOS6では、これがiOSアプリケーション開発のスキルで、iPhoneの豊富なセンサがそのまま利用できるようになりました。

#### ユーザ通知機能

iOSはBluetooth LEの通信には関与しません。しかし、iOSアプリケーションがアクセサリに接続したままで終了すると、そのアクセサリとiPhoneとの接続は維持されます。このときに、アクセサリがiOSアプリケーションに通知を送信すると、それを受信すべきiOSアプリケーションが停止しているので、その通知があったことが通知センターに表示されます。<TBD 確認。ほんとうか？>

アプセサリは、アプリケーションと強く結びつきます。しかし、iOSアプリケーションは、メモリ不足により強制終了されるなど、常に実行されているとは保証ができません。このユーザ通知表示は、iOSアプリケーションが実行されていないときでも、最低限の機能の提供に使えます。

例えば、置き忘れ防止のキーホルダーに使えます。キーホルダーは、通信の電波強度が弱くなればiPhoneとの距離があいたとして、置き忘れの警告をiPhoneに送信します。対応するiOSアプリケーションが起動していれば、適切な音や表示が出せますが、iOSアプリケーションが動いていなくても、最低限の通知はできます。

この通知は補助的なもので、必ず動作するものではありません。もしも、アクセサリとiPhoneの接続が切断すれば、iOSは再接続をしませんから、切断したままになります。そして、アクセサリとの接続が切断しても、ユーザには何も通知されませんから、ユーザが切断に気づくことはありません。もしも、ユーザが必ず通知が来るものだと思っていると、この振る舞いはユーザには見えませんから、期待と異なる商品と受け取られます。

#### バックグラウンド動作

iOS4から、音楽再生やVoIPなど分野を限定して、アプリケーションのバックグラウンド・モードが導入されました。iOS5では、Bluetooth LEのセントラルとしてのバックグラウンド・モードが、iOS6では、それに加えてペリフェラルでのバックグラウンド・モードが、追加されました。

iOSアプリケーションのバックグラウンド動作は、アプリケーションが自分で好きなだけ処理をおこなうものでは、ありません。Bluetooth LEのバックグラウンド動作では、Bluetooth LEの発見や通知などのイベントが発生するたびに、iOSアプリケーションに10秒間の処理時間が与えられます。<TBD ペリフェラルでのBG動作＞

このバックグラウンド・モードを使い、例えばBluetooth LEデバイスとの通信が切断したときに、前節の通知と異なり、iOSアプリケーションから再接続処理を行うことも、またユーザに切断を通知することもできます。

### iPhoneはハブ・デバイス

アクセサリは、安価で小さいことが求められます。コストと大きさは、電池容量や液晶などの表示器を、小さいものに制約します。アプセサリはiPhoneの機能:

* iOSアプリケーションの表示やユーザ・インタフェース
* 計算処理能力や記憶媒体、データの統合
* 3Gを含めたネットワーク接続

を、アクセサリの機能として利用します。

iPhoneの液晶とユーザインタフェースが利用できると、アクセサリの表現力がぐっと広がります。アクセサリは、たいてい本体が小さいので、液晶表示器自体の大きさも小さくなります。操作手段も、本体が小さいと、小さな押ボタンを2~3個搭載するのが、精一杯です。本体の製造価格を抑えると、まず液晶が決まった数字やキャラクタを表示する簡素なものになります。ドット表示で任意の文字と図形とを表示するには、高精度のドットマトリクス方式の表示器が必要です。このように、アクセサリは本体の大きさと製造費用の2点でユーザ・インタフェースが制約されます。

例えば、ありきたりの万歩計がiPhoneのユーザ・インタフェースを使えるようになったとします。アクセサリ単体ではその日の歩数の表示だけです。最近のマイクロコントローラの処理能力であれば、万歩計が1時間あたりの歩数を記録することは容易に実現できます。ですが、万歩計自体の小さな液晶では、それを魅力的に表示できません。iPhoneの液晶表示であれば、iOSアプリケーションの実装次第で、例えば、その日の1時間あたりの歩数を、運動の強度にあわせたカラーバーでグラフ表示など、アクセサリ単体ではできない表示が、追加コストをかけずに容易に得られます。

iPhoneの記憶媒体は大容量で、端末にデータを貯めていけます。先ほどの万歩計を例に取れば、iPhoneはギガバイト単位の記憶容量があります。ですから、何百年分でも、過去の履歴データを保存できます。そして、アクセサリが壊れたり失われたりすると、そこに記録されたデータも失います。アクセサリは消耗品ですから、長期間の過去データを置いてもデータを失うようでは、意味がありません。

iPhoneは、すべてのアクセサリのデータが集積する、ハブとして機能します。また、その強力な計算処理能力で、集積したデータを統合して解析もできます。例えば、体重管理が目的のとき、万歩計以外にも心拍センサや体重計など複数のBluetooth LEデバイスで、計測をしていたとします。歩数データに心拍データを加えることで、消費カロリーをより高精度に計算できるでしょう。また体重計のデータを統合することで、運動の成果と食事内容の提案を、iPhoneから出せるようになります。

iPhoneは、集積したデータをネットワークに同期させるハブとして機能します。例えば、あるiPhoneが読みだした万歩計のデータは、Apple社のiCloudなどを使えば、iPadなどの他の自分の端末とネットワーク同期します。また、ネットワークを通じてサーバにデータを保存できます。

また、iOSアプリケーションがソーシャル・ネットワーク・サービスと連携すれば、例えば万歩計ならば毎日の運動量を仲間と共有したり競争ができます。このソーシャル・ネットワークは、サービスの魅力であり、かつ、買い替え時に他社への乗り換えの抑止にもなります。Bluetooth LEアクセサリ単体のハードウェアは単純で、設計製造を請け負う企業と通じて、参入が容易です。ですから類似製品がいろいろ出てきます。ですが、アプリケーションを通して、ソーシャル・ネットワークのつながりが形成されていれば、仲間が一斉に他社製品に乗り換えでもしない限り、次も同じ会社の製品を購入するでしょう。

### iPhoneを拡張するアプセサリ

iPhoneは加速度をはじめとする多くのセンサを内蔵していて、万能です。しかしiPhone自体の大きさや頻繁に充電が必要なことがそぐわない用途も、あります。iPhoneから見てアプセサリは:

* 機能の一部切り出しや小型化
* iPhoneにない機能を拡張

します。

アクセサリは何かの検出をするものがほとんどです。たとえiPhoneが持っているセンサであっても、アクセサリとしてそれを切り話すことで、小型化や電池交換頻度の低減、また破損するかもしれない場面でも安心して使えるようになります。

例えば、万歩計ではどうしょううか。iPhone自体にも加速度センサがあります。ですから、iOSアプリケーションで万歩計は作れます。しかしそれでは、ユーザは計測のためにiPhoneを絶えず持ち歩いていなければなりません。また、カバンに入れられたりして、歩数の計測データが取れない状態になるかもしれません。

万歩計単体をアクセサリにすれば、安価で親指の先程度の小型なものになります。たいてい1台だけを持っているiPhoneの場合と違い、いくつも購入しておいて、それぞれのズボンのポケットに入れておく使い方ができます。万歩計単体ならば、コイン型電池で半年程度動作しますから、入れたままにしておけますし、電池残量が少なくなっても、Bluetooth LEで通信をしてiPhoneからユーザに交換をうながすこともできます。iPhoneの機能の一部を、アクセサリとして切り離すことで、アクセサリの存在を忘れてしまえる使い方ができるようになります。

また自転車などのフィットネス分野では、iPhoneを自転車に固定して利用する場合、衝撃による破損や直射日光による温度上昇で動作が停止するかもしれません。このような過酷な状況では、利用場面に合わせて設計したアクセサリを利用することで、破損でiPhone自体を壊す恐れがなくなり、またアクセサリならば破損しても買い換えも容易です。

またiPhoneに搭載されていないセンサや通信機能を、アクセサリで拡張できます。例えば、糖尿病などで日常的に血糖値を測定しなければならない方のために、血糖値測定器があります。血糖値センサをBluetooth LEでiOSアプリケーションとつなぐことで、iPhoneを血糖値測定装置に拡張できます。






